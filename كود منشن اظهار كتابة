const axios = require('axios');
const myTOKEN = "توكنك";

const CHANNEL_IDS = [
"" 
];// وضع ايديات القنوات مستهدفة
const mentionedUserIds = [
"" 
];// وضع ايديات مستهدفين
let messages = [
'اشق كسعرضمك', 
'كس اختك', 
'كس امك','يبن العواهر', 
'رجلي بكسمك', 
'زبي فيكسختك','افتتاااح امك', 
'تبخير شرفك', 
'كس اهلك',
'مضاجعة عرضك', 
'اغتصاب شرفك', 
'كسم شرفك با ولد القحبه', 
'ضربمك', 
'يين لقحبه', 'سدحمك',
'كس عشريتمك', 
'تفتيحمك', 'تلطشيمك',
'اصتياد كسمج بلمرصد', 
'اضرب امج بمطوة', 
'اعطاا لامج المؤوى', 
'خنق كسمك',
'يلعن كسختك',
'يبن الدياثة',
'اخزوق كسمج',
'تطشير عرضج', 
'توسيخ مهبل امك', 
'لهو بصدر امك', 
'اغتصاب عشيرتك', 
'رسسسسسسميا موت امك', 
' اختراق امك', 
'كسمين اصلك', 
'احرق كسمك', 
'فرع كسختك', 
'يبنت الهروبية', 
'افجر طرمة امك', 
'دعس كسمين امك', 
'انيك اهلك', 
'نكح امك لدرجة صراخ', 
'اطشر عرضج', 
'يبن السكس', 
'الاعتداء على امج', 
'يبن المشلولة', 
'لنكح امك يبن المفتوحة', 
'يبن الشرموطة', 
'انيج امك تالممات', 
'قصف كسمج', 
'تدمير كسمج', 
'قتل امج', 
'نيج كسمج فجأوة',
'سحب سحبتين وانيج اصلج فمرتين',
'زبي بكسم اصلك',
'للف عيري بكسمك ياولد جرار', 
'يولد الاموره اخلي كسمك ايقاع وطرب',
'افتح كسختك', 
'تم نتهاك شرفمج', 
'نكت امج', 
'زبي ينتصب بكسمك', 
'تصليخمك', 
'صفع طيزختك', 
'اسدح اختك', 
'يبن المفتوحة', 
'كسختك بزبي', 
'فشخ امك', 
'اقتلاع مصارين امك', 
'ياولد جرار كسمك يبيله عير فرار', 
'ادعس شرفك', 
'تطويع امج اافضاء', 
'تقطيع أحشاء امك واكلها', 
'تهكير كسمج', 
'اسقاط امك جثة هامدة', 
'تخوير امك', 
'يبن المربوطة', 
'بعص امج الزانية', 
'تفخير كسمج', 
'نيج امواتج',
'وو جنون امك', 
'هدم كسمج بمطرقة',
'توسيع كسمك',
'اعدام كسختك',
 'اسدح اختك',
 'كسمج الاسود',
 'كسشرف اهلك',
 'تقطيع امج شلالال',
 'يبن القحبة',
 'تلطشيختك',
 'تطهير كسمج', 
 'ادحش بطيز امج العتتاد', 
 'تخنثير كسمج', 
 'ظهوى عيات ع امك من كثر تكفيات', 
'تقتيش كسختك',
'بشلع شرفك',
'شلع جلدمك',
'تطبيشط كسختك', 
'سرقة احشاء كسمج وبيعهااا لزبائن', 
'لكممك', 
'فرك زبي لكسمك',
'يبن المتشردة',
'خربشة كسمك',
'اثرم لحممك',
'اغتصاب شرف اهلك',
'تحريف كسمك بزبي',
'احشي بكسمك عيور فتاكة',
'انيج شرفج', 
'افتح صرم امك', 
'تحطيم جمجمة امك', 
'كسخواتمك','يخو القحبة',
'شطر كسختك',
'ذبحمك','ارتعاب امج', 
'اغتيال امج بقناص',
'قعر امج',
'قرع كسختك',
'قلع احشاء كسمك',
 'يا ولد لقحاب',
'شطر كسمك لانصاف', 
'التحرش بامج', 
'هروب كسمك', 
'مضاجعة قبيلتك',
'تصفيق ترمة امك البيضاء', 
'تدمير كسمج', 
'ذوبان امك فوق زبي', 
'تخوير امك', 
'يبنت المسدوحة', 
'قص مهبل امك', 
'موت امك بطريقة بشعة', 
'شرف امك على شفير الموت', 
'اخلاء امك', 
'حرق جثمان امج', 
'تعذيب امك',
'يخو لدعارة',
'اعطااا لشرفج المؤى',
'صفج كسمك',
'كس ربمك',
'نيك اختك',
'يبن لفرخة',
'نيك كسمك',
'تهكير كسمج',
'انتهاك كسمك',
'نيكعرضك', 'نيكشرفك',
'تديث كسمك',
'صربمك',
'قطعمك',
'شخلمك',
'اشلل كسمك بزبي',
'تسيحر كسختك',
'افنش كسمك',
'بعص كسختك',
'محاولان امج اليأسه ',
'انتحار كسمج',
'انفجاع كسختك',
'فضح اختج',
'يلعن كس اصلك',
'فتح امج بطوف',
'قشع كسختك',
'ونكت اصلك با ولد الممحونة',
'شق راسمج بالفأس',
'يبن المفتوحة',
'فقرعت امج',
'افجر كسمك',
'رسسسسسسسسسسسسسسميا تم نيك امك',
'انشطار امج رسميا',
'بين بنت الهيك والنيك البتترفع ع الكوريك',
' امك تتناك مليون مرة باليوم',
'تزوير زبي و دخول نسخته بكسختج',
'يبن الحازقة',
'انيج كساسة اصلك',
',عدم شرفج',
'ناكو امك فجأتا!!!',
'كسمين عشيرتمك',
'موت امك فوق زبي بي خطاء',
'تقبمك', 
'ادخال عيري ببطء فكسمك',
'نيك امج بعمارة',
'اشقلم امج',
'يبن العاريه',
'هبوط طيزمك فوق زبي',
' ضرب طيزختك بسرعة فلاش',
'نكح امك بالبئر',
'انيج امك بالمأوى',
'احلق بكسمج في سماء',
'نحر كسختك',
'تصليخمك',
 'لعنمك',
'تشيمم امك',
'نيجهتك',
'نيج امواتج',
'يين لزواني',
'يبن المخانيث',
'اذهل راسمك',
'دهن طيزختك',
'يين لشرموطة',
'هحط زبي بكس نسلك',
'ننهش كسمك',
'صعقمك',
'سحقمك',
'شقمك','خطف كسمك', 
'تخضيع كسختج',
'فتحمك',
'كسعرضك',
'يبن المناكيح',
'سحلمك',
'شحط كسختك',
'يين لمخنثه',
'يبن لفاجرة', 
'تسوية الامور مع امج', 
'تجريد كسختمك من الملابس', 
'ياوولد زواني', 
'افخخ كسختك', 
'تحجر طبزختك', 
];
let previousMessage = '';
let totalSeconds = 0;
const Bottleneck = require('bottleneck');
const limiter = new Bottleneck({
  minTime: 3000,
  maxConcurrent: 1
});

const calculateDelay = (message) => {
  const wordCount = message.trim().split(/\s+/).length;
  return Math.min(5000 + wordCount * 100, 15000);
};// تحكم في السرعة عن طريق مكتوب عليه 5000

const sendMessage = async (message, channelId, mentionedUserIds = []) => {
  if (!message || !message.trim()) {
    console.error('رسالة غير صالحة');
    return false;
  }

  const url = `https://discord.com/api/v9/channels/${channelId}/messages`;
  const headers = {
    Authorization: myTOKEN,
    'Content-Type': 'application/json',
  };

  const content = mentionedUserIds.length > 0
    ? `${message} ${mentionedUserIds.map(id => `<@${id}>`).join(' ')}`
    : message;

  try {
    console.log(`Sending typing indicator to channel ${channelId}...`);
    await axios.post(`https://discord.com/api/v9/channels/${channelId}/typing`, {}, { headers });
    
    console.log(`Sending message to channel ${channelId}...`);
    const response = await limiter.schedule(() => axios.post(url, { content }, { headers }));

    if (response.status === 200 || response.status === 201) {
      console.log(`تم إرسال الرسالة إلى القناة ${channelId} بنجاح!`);
      return true;
    } else {
      console.error('خطأ في إرسال الرسالة:', response.data);
      return false;
    }
  } catch (error) {
    if (error.response) {
      const status = error.response.status;
      if (status === 429) {
        const retryAfter = parseInt(error.response.headers['retry-after']) * 1000 || 10000;
        console.warn(`تم الوصول إلى حد الطلبات. إعادة المحاولة بعد: ${retryAfter} مللي ثانية`);
        await new Promise(resolve => setTimeout(resolve, retryAfter));
        return sendMessage(message, channelId, mentionedUserIds);
      } else if (status === 405) {
        console.error('خطأ 405: طريقة غير مسموح بها. تحقق من طلبك.');
      } else {
        console.error('خطأ في الطلب:', status, error.response.data);
      }
    } else {
      console.error('خطأ غير متوقع:', error.message || error);
    }
    return false;
  }
};

const sendMessagesWithDelay = async () => {
  while (true) {
    if (messages.length === 0) {
      console.log('تم إرسال جميع الرسائل. إعادة تعيين قائمة الرسائل.');
      messages = [
'اشق كسعرضمك', 
'كس اختك', 
'كس امك','يبن العواهر', 
'رجلي بكسمك', 
'زبي فيكسختك','افتتاااح امك', 
'تبخير شرفك', 
'كس اهلك',
'مضاجعة عرضك', 
'اغتصاب شرفك', 
'كسم شرفك با ولد القحبه', 
'ضربمك', 
'يين لقحبه', 'سدحمك',
'كس عشريتمك', 
'تفتيحمك', 'تلطشيمك',
'اصتياد كسمج بلمرصد', 
'اضرب امج بمطوة', 
'اعطاا لامج المؤوى', 
'خنق كسمك',
'يلعن كسختك',
'يبن الدياثة',
'اخزوق كسمج',
'تطشير عرضج', 
'توسيخ مهبل امك', 
'لهو بصدر امك', 
'اغتصاب عشيرتك', 
'رسسسسسسميا موت امك', 
' اختراق امك', 
'كسمين اصلك', 
'احرق كسمك', 
'فرع كسختك', 
'يبنت الهروبية', 
'افجر طرمة امك', 
'دعس كسمين امك', 
'انيك اهلك', 
'نكح امك لدرجة صراخ', 
'اطشر عرضج', 
'يبن السكس', 
'الاعتداء على امج', 
'يبن المشلولة', 
'لنكح امك يبن المفتوحة', 
'يبن الشرموطة', 
'انيج امك تالممات', 
'قصف كسمج', 
'تدمير كسمج', 
'قتل امج', 
'نيج كسمج فجأوة',
'سحب سحبتين وانيج اصلج فمرتين',
'زبي بكسم اصلك',
'للف عيري بكسمك ياولد جرار', 
'يولد الاموره اخلي كسمك ايقاع وطرب',
'افتح كسختك', 
'تم نتهاك شرفمج', 
'نكت امج', 
'زبي ينتصب بكسمك', 
'تصليخمك', 
'صفع طيزختك', 
'اسدح اختك', 
'يبن المفتوحة', 
'كسختك بزبي', 
'فشخ امك', 
'اقتلاع مصارين امك', 
'ياولد جرار كسمك يبيله عير فرار', 
'ادعس شرفك', 
'تطويع امج اافضاء', 
'تقطيع أحشاء امك واكلها', 
'تهكير كسمج', 
'اسقاط امك جثة هامدة', 
'تخوير امك', 
'يبن المربوطة', 
'بعص امج الزانية', 
'تفخير كسمج', 
'نيج امواتج',
'وو جنون امك', 
'هدم كسمج بمطرقة',
'توسيع كسمك',
'اعدام كسختك',
 'اسدح اختك',
 'كسمج الاسود',
 'كسشرف اهلك',
 'تقطيع امج شلالال',
 'يبن القحبة',
 'تلطشيختك',
 'تطهير كسمج', 
 'ادحش بطيز امج العتتاد', 
 'تخنثير كسمج', 
 'ظهوى عيات ع امك من كثر تكفيات', 
'تقتيش كسختك',
'بشلع شرفك',
'شلع جلدمك',
'تطبيشط كسختك', 
'سرقة احشاء كسمج وبيعهااا لزبائن', 
'لكممك', 
'فرك زبي لكسمك',
'يبن المتشردة',
'خربشة كسمك',
'اثرم لحممك',
'اغتصاب شرف اهلك',
'تحريف كسمك بزبي',
'احشي بكسمك عيور فتاكة',
'انيج شرفج', 
'افتح صرم امك', 
'تحطيم جمجمة امك', 
'كسخواتمك','يخو القحبة',
'شطر كسختك',
'ذبحمك','ارتعاب امج', 
'اغتيال امج بقناص',
'قعر امج',
'قرع كسختك',
'قلع احشاء كسمك',
 'يا ولد لقحاب',
'شطر كسمك لانصاف', 
'التحرش بامج', 
'هروب كسمك', 
'مضاجعة قبيلتك',
'تصفيق ترمة امك البيضاء', 
'تدمير كسمج', 
'ذوبان امك فوق زبي', 
'تخوير امك', 
'يبنت المسدوحة', 
'قص مهبل امك', 
'موت امك بطريقة بشعة', 
'شرف امك على شفير الموت', 
'اخلاء امك', 
'حرق جثمان امج', 
'تعذيب امك',
'يخو لدعارة',
'اعطااا لشرفج المؤى',
'صفج كسمك',
'كس ربمك',
'نيك اختك',
'يبن لفرخة',
'نيك كسمك',
'تهكير كسمج',
'انتهاك كسمك',
'نيكعرضك', 'نيكشرفك',
'تديث كسمك',
'صربمك',
'قطعمك',
'شخلمك',
'اشلل كسمك بزبي',
'تسيحر كسختك',
'افنش كسمك',
'بعص كسختك',
'محاولان امج اليأسه ',
'انتحار كسمج',
'انفجاع كسختك',
'فضح اختج',
'يلعن كس اصلك',
'فتح امج بطوف',
'قشع كسختك',
'ونكت اصلك با ولد الممحونة',
'شق راسمج بالفأس',
'يبن المفتوحة',
'فقرعت امج',
'افجر كسمك',
'رسسسسسسسسسسسسسسميا تم نيك امك',
'انشطار امج رسميا',
'بين بنت الهيك والنيك البتترفع ع الكوريك',
' امك تتناك مليون مرة باليوم',
'تزوير زبي و دخول نسخته بكسختج',
'يبن الحازقة',
'انيج كساسة اصلك',
',عدم شرفج',
'ناكو امك فجأتا!!!',
'كسمين عشيرتمك',
'موت امك فوق زبي بي خطاء',
'تقبمك', 
'ادخال عيري ببطء فكسمك',
'نيك امج بعمارة',
'اشقلم امج',
'يبن العاريه',
'هبوط طيزمك فوق زبي',
' ضرب طيزختك بسرعة فلاش',
'نكح امك بالبئر',
'انيج امك بالمأوى',
'احلق بكسمج في سماء',
'نحر كسختك',
'تصليخمك',
 'لعنمك',
'تشيمم امك',
'نيجهتك',
'نيج امواتج',
'يين لزواني',
'يبن المخانيث',
'اذهل راسمك',
'دهن طيزختك',
'يين لشرموطة',
'هحط زبي بكس نسلك',
'ننهش كسمك',
'صعقمك',
'سحقمك',
'شقمك','خطف كسمك', 
'تخضيع كسختج',
'فتحمك',
'كسعرضك',
'يبن المناكيح',
'سحلمك',
'شحط كسختك',
'يين لمخنثه',
'يبن لفاجرة', 
'تسوية الامور مع امج', 
'تجريد كسختمك من الملابس', 
'ياوولد زواني', 
'افخخ كسختك', 
'تحجر طبزختك',       ‏
];
    }

    let randomIndex;
    do {
      randomIndex = Math.floor(Math.random() * messages.length);
    } while (messages[randomIndex] === previousMessage || !messages[randomIndex]);

    const message = messages[randomIndex];

    if (message && message.trim()) {
      previousMessage = message;
      messages.splice(randomIndex, 1);

      let sentSuccessfully = false;
      while (!sentSuccessfully) {
        try {
          await Promise.all(CHANNEL_IDS.map(channelId => sendMessage(message, channelId, mentionedUserIds)));
          sentSuccessfully = true;
        } catch (err) {
          console.error('خطأ غير متوقع أثناء إرسال الرسالة:', err.message || err);
          await new Promise(resolve => setTimeout(resolve, 5000));
        }
      }

      const delay = calculateDelay(message);
      totalSeconds += delay / 1000;
      await new Promise(resolve => setTimeout(resolve, delay));
    } else {
      console.error('تم اختيار رسالة غير صالحة');
    }
  }
};

sendMessagesWithDelay().catch(err => {
  console.error('خطأ في إرسال الرسائل:', err.message || err);
});
const express = require("express");
const app = express();
app.listen(3000, () => console.log("I'm Ready To nik ksm darkandl7n..! 24H"));

app.get("/", (req, res) => {
  res.send(`
  <body>
    <center><h1>كس عرضج لحن</h1></center>
  </body>
  `);
});

setInterval(() => {
  var now = new Date();
  console.log(now.toLocaleTimeString());
}, 1000);

process.on('uncaughtException', (err) => {
  console.error('استثناء غير متوقع:', err.message || err);
});

process.on('unhandledRejection', (reason, promise) => {
  console.error('رفض غير معالج:', reason);
});
